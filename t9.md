# T9: EL MODELO EER

## Metodología de diseño de Bases de Datos
El diseño de una BD siempre consta de las mismas fases
independientemente del MODELO utilizado:

![alt text](image-2.png)

En cada fase, según el modelo obtenemos un esquema o
diagrama
![alt text](image-3.png)

## Qué es y Para Qué sirve el modelo ER

Es un modelo de datos semántico gráfico
• Debe ser el primer paso en el diseño de una BD (diseño conceptual)
• Debe capturar al máximo las especificaciones del análisis de
requerimientos
• Es una visión de alto nivel, sin excesivos detalles de su futura
implementación
• Representa entidades, sus propiedades y las relaciones
existentes entre ellas.
• Describe la arquitectura persistente de datos del S.I.
• No detalles de procesos o transacciones, solo estructura de datos

NO EXISTE UNA NOTACIÓN ESTÁNDAR, NOSOTROS UTILIZAREMOS UNA DE LAS MÁS USADAS PERO
HAY OTRAS MUCHAS

## Metodología de diseño de Bases de Datos
- **Diseño conceptual:** Transformación de las
especificaciones a un EER
- **Diseño lógico:** Transformación del EER a esquema relacional
- **Diseño físico:** Transformación del esquema relacional a estructuras de la BD

## Elementos del Modelo EER

- **Entidades:** se describen por sus atributos, que pueden ser:
  - Identificador
  - Compuesto
  - Multivaluado
  - No nulo
  
![alt text](image-4.png)

- **Generalización:** tipos dentro de una entidad. Heredan las propiedades de la entidad padre y añaden las suyas propias.
La generalización puede ser:
- **Total o Parcial:** si todos los elementos de la entidad padre deben estar en alguna de las hijas o no.
- **Disjunta o Solapada:** si un elemento puede estar en varias hijas o no.

![alt text](image-5.png)

*Ejemplo de generalización total y disjunta*

## Transformación de un EER a un esquema relacional

### Modelo relacional
- Identificador (*SÓLO PUEDE EXISTIR UNA CP PERO VARIAS cAlt*):
  - Clave primaria (CP) No duplicados
  - Clave alternativa (cAlt) No nulos
- Clave ajena
- Valor no nulo
### Ejemplos de transformación:
Clave primaria y valor no nulo
![alt text](image-6.png)
Clave primaria compuesta y valor no nulo
![alt text](image-7.png)
Atributos multivaluados van a una tabla aparte
![alt text](image-8.png)
Generalización total y disjunta
![alt text](image-9.png)

## Relaciones en el esquema EER

Existen distintos tipos de relaciones:
- Binarias
  - Relaciones 1:1
  - Relaciones 1:N
  - Relaciones M:N
  - Reflexivas
- Agregaciones(entidades complejas)
- Ternarias,Cuaternarias,....N-arias
  
Existen distintas restricciones en las relaciones:
- Restricción de existencia
- Restricción de Identificador (entidades débiles)

### Relaciones binarias

![alt text](image-12.png)

#### Binarias reflexivas
![alt text](image-13.png)

![alt text](image-14.png)

#### Restricciones de existencia
![alt text](image-15.png)
- La 8:8 no puede pasarse a modelo relacional
- En las reflexivas funciona igual

#### Restricciones de identificador: "Entidades débiles"

Una entidad necesita para identificarse su identificador MAS el
identificador de otra entidad con la que esta relacionada. Sólo es posible en **relaciones 1:N**

![alt text](image-16.png)

## Transformación de relaciones binarias al modelo relacional

### Binarias 1:m

![alt text](image-17.png)

- **Con restricciones de existencia**

![alt text](image-18.png)

![alt text](image-19.png)

- **Con clave primaria compuesta:**

![alt text](image-20.png)

- **Con atributo:**

![alt text](image-21.png)

### Binarias m:n

![alt text](image-22.png)

- **Con atributo multivalor:**

![alt text](image-23.png)

### Binarias 1:1

![alt text](image-24.png)

- **Con una restricción de existencia**

![alt text](image-25.png)

- **Con dos restricciones de existencia**

![alt text](image-26.png)


### Reflexiva M:N

![alt text](image-27.png)

### Reflexiva 1:N

![alt text](image-28.png)

### Reflexiva 1:1

![alt text](image-29.png)

### Con restricciones de identificador

![alt text](image-30.png)

## Agregaciones (supertipos)

![alt text](image-31.png)

![alt text](image-32.png)

![alt text](image-33.png)

![alt text](image-34.png)

![alt text](image-35.png)

![alt text](image-36.png)

## Ternarias y N-arias

La cardinalidad expresada en la relación incluye semántica que determinará cual será la clave primaria de la relación cuando se pase al modelo relacional.

![alt text](image-37.png)


La visión desde una entidad hacia cada una de las
otras, de modo independiente es siempre de M:N independientemente del tipo de cardinalidades de la

![alt text](image-38.png)

En la relación siempre intervienen las tres entidades
IMPARTIR siempre consta de PROFESOR+GRUPO+ASIGNATURA

La semántica la define la cardinalidad de la relación:
- Dada una asignatura (ASI1) y un grupo (MAÑANA) solo permite un profesor
- Dado un profesor (PROF1) y un grupo (MAÑANA) solo puede impartir una asignatura
- Dada una asignatura (ASI1) y un profesor (PROF1) puede impartir muchos grupo

Si existe restricción de existencia:
![alt text](image-39.png)

- Todos los profesores deben de estar impartiendo al menos una asignatura-grupo
- Puedo tener asignaturas y/o grupos sin ser impartidos.

## Transformación de relaciones ternarias y n-arias al modelo relacional

![alt text](image-40.png)

![alt text](image-41.png)

![alt text](image-42.png)

![alt text](image-43.png)

![alt text](image-44.png)

